{"version":3,"sources":["uni-app:///main.js",null,"webpack:///F:/桌面/项目/水务安全小程序/safe-uniapp/pages/home/home.vue?ab18","webpack:///F:/桌面/项目/水务安全小程序/safe-uniapp/pages/home/home.vue?0bf5","webpack:///F:/桌面/项目/水务安全小程序/safe-uniapp/pages/home/home.vue?90cb","uni-app:///pages/home/home.vue","webpack:///F:/桌面/项目/水务安全小程序/safe-uniapp/pages/home/home.vue?e9db","webpack:///F:/桌面/项目/水务安全小程序/safe-uniapp/pages/home/home.vue?92da"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","box","safe","worker","improveDetail","info","inspectionsDetail","projectStop","computed","watch","archive","data","isScan","isNewCode","checkDetailDto","improvesDto","hasInBlock","show","showInfo","selectImprove","showDetail","showInspectionsDetail","showImprove","positionAccuracy","positions","showBlock","selectBlock","showWorder","showProject_stop","showStartProject","startProject","node","category","场所","name","value","name2","value2","value3","工程","特种作业","list","type","types","inspections","time","company","user","improve_situation","improve_state","improves","stopList","charts","loading","loading2","index","color","month","year","projects","icon","path","id","actions","methods","onSelectImprove","onSelectInspection","item","onSelectInspections","getHasInBlock","features","forEach","parseInt","i","units","getDistance","sg","sl","sf","s","c","w","r","d","h1","h2","onSelectConfirm","onSelectCancel","init2","lengthIndex","p","go","uni","title","showCancel","success","selectChart","selectChartType","selectListType","onSubmitProjectStart","content","post","code","lbs_longitude","lbs_latitude","note","then","catch","onSubmitProjectEnd","blockCode","onSubmitWorkEnd","get","res","onSubmitWorkStart","getLocation","isHighAccuracy","console","e","fail","getData","getUrlParam","params","searchCode","onReady","onShow","onLoad","url"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACc;;;AAGjE;AACyK;AACzK,gBAAgB,6KAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClJA;AAAA;AAAA;AAAA;AAA+nB,CAAgB,8mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;AC6bnpB;AACA;AACA;AACA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eACA;EACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;EACA;EACAC,4BACA,uEAEA;EACAC;IACAC;MACA;QACA;MACA;MACA;QACA;UACA;QACA;UACA;QACA;QAEA;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;MACA;MACA1B;QACA2B;QACAC,KACA;UACAC;UACAC;QACA,GACA;UACAD;UACAC;UACAC;UACAC;UACAC;QACA,GACA;UACAJ;UACAC;UACAC;UACAC;UACAC;QACA,GACA;UACAJ;UACAC;UACAC;UACAC;UACAC;QACA,EACA;QACAC,KACA;UACAL;UACAC;QACA,GACA;UACA;UACA;UACA;UACAD;UACAC;UACAC;UACAC;UACAC;QACA,GACA;UACAJ;UACAC;UACAC;UACAC;UACAC;QACA,GACA;UACAJ;UACAC;UACAC;UACAC;UACAC;QACA,EACA;QACAE,OACA;UACAN;UACAC;QACA,GACA;UACAD;UACAC;QACA,GACA;UACAD;UACAC;UACAC;UACAC;QACA,GACA;UACAH;UACAC;UACAC;UACAC;QACA,GACA;UACAH;UACAC;UACAC;UACAC;QACA;MAEA;MACAI;QACAC;QACAC,QACA;UACAT;UACAC;QACA,GACA;UACAD;UACAC;QACA,GACA;UACAD;UACAC;QACA,EACA;QACAS,cACA;UACAC;UACAC;UACAC;UACAC;UACAC;QACA,EACA;QACAC;MACA;MACAC;QACAxC;MACA;MACAyC;QACAT,QACA;UACAT;UACAC;QACA,GACA;UACAD;UACAC;QACA,EACA;QACAkB;QACAC;QACAZ;QACAa;QACA;UACAC;UACAC;UACAC;UACAxB;QACA;QACA;UACAsB;UACAC;UACAC;UACAxB;QACA;QACA;UACAsB;UACAC;UACAC;UACAxB;QACA;QACA;UACAsB;UACArB;QACA;MACA;MACAwB,WACA;QACAzB;QACA0B;QACAC;QACAC;MACA,GACA;QACA5B;QACA0B;QACAC;QACAC;MACA,GACA;QACA5B;QACA0B;QACAC;QACAC;MACA,EACA;MACAC,UACA;QACA7B;QACA0B;QACA;QACAE;MACA,GACA;QACA5B;QACA0B;QACA;QACAE;MACA,GACA;QACA5B;QACA0B;QACA;QACAE;MACA;IAEA;EACA;EACAE,uDACA,4CACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA,IACAC,iCACA,yCACA;QACA;QACA;QACA;MACA;IACA;IACAC;MAAA;MACA;QACA;QACA;QACAD;UACA;YACArD;UACA;YACA;YACAA;UACA;QACA;QACA;QACA;MACA;IACA;IACAuD;MAAA;MACA;QACA;MACA;QACA;UACA;UACA,CACA,8CACAC,gBACAC;YACAvD,aACAA,cACA,qEACAwD,SACA,kCACA,kBACAC,2BACA;cAAAC;YAAA,EACA,CACA,GACA;UACA;UACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;MAEA;MACA;MACA;MAEA;MACA;MACA;MAEAC;MACAC;MACAC;MAEAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MACAC;MAEA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;QACA;QACA;UACA;UACA;UACA;YACA;cACA;cAAA,CACA,+CACAjB;gBACAkB,cACA,qEACAjB,SACA,kCACA,kBACAkB,2BACA;kBAAAhB;gBAAA,EACA,CACA,GACA,oCACAnB,QACAkC;cACA;YACA;UACA;UACA;UACA;QACA;UACA;QACA;MACA;IACA;IACAE;MAAA;MACA;QACA;MACA;QACA;MACA;QACA;MACA;QACA,IACA;UAAA;QAAA,MACA,yDACA;UACA;QACA;UACAC;YACAC;YACAC;YACAC;UACA;QACA;MACA;QACA;UAAA;QAAA;UACA;QACA;UACAH;YACAC;YACAC;YACAC;UACA;QACA;MACA;QACA;UACA;QACA;UACAH;YACAC;YACAC;YACAC;UACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACAP;QACAC;QACAO;QACAL;UACA;YACAH;cACAC;YACA;YACA,gBACAQ;cACAC;cACAC;cACAC;cACAC;YACA,GACAC;cACAd;cACA;cACAA;gBACAC;gBACAC;gBACAC;cACA;YACA,GACAY;cACAf;cACAA;gBACAC;gBACAO;gBACAN;cACA;YACA;UACA;QACA;MACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACAc;MAAA;MACA;QAAA;MAAA;QACAhB;UACAC;UACAO;UACAL;YACA;cACAH;gBACAC;cACA;cACA,gBACAQ;gBACAC;gBACAO;cACA,GACAH;gBACAd;gBACAA;kBACAC;kBACAC;kBACAC;gBACA;cACA,GACAY;gBACAf;gBACAA;kBACAC;kBACAO;kBACAN;gBACA;cACA;YACA;UACA;QACA;MACA;QACAF;UACAC;UACAC;UACAC;QACA;MACA;IACA;IACAe;MAAA;MACAlB;QACAC;QACAO;QACAL;UACA;YACAH;cACAC;YACA;YACA,gBACAkB,mDACAL;cACAd;cAEA;gBACAA;kBACAC;kBACAC;kBACAC;gBACA;cACA;gBACAH;kBACAC,OACAmB,oBACA;kBACAlB;kBACAC;gBACA;cACA;YACA,GACAY;cACAf;cACAA;gBACAC;gBACAO;gBACAN;cACA;YACA;UACA;QACA;MACA;IACA;IACAmB;MAAA;MACArB;QACAC;QACAO;QACAL;UACA;YACAH;cACAC;YACA;YACA,iBACAkB,mDACAL;cACAd;cACAA;gBACAC;gBACAC;gBACAC;cACA;YACA,GACAY;cACAf;cACAA;gBACAC;gBACAO;gBACAN;cACA;YACA;UACA;QACA;MACA;IACA;IACAoB;MAAA;MACA;QACAtB;UACAlD;UACAyE;UACApB;YACA;cACAqB;cAEA,8DACAC,aACAA,WACA;cACA;cACA;cACA;YACA;UACA;UACAC;QACA;MACA;IACA;IAEAC;MAAA;MACA;MACA;QACA,cACAR,0DACAL;UACA;QACA;QACA,cACAK,4DACAL;UACA;QACA;QACA,cACAK,6DACAL;UACA;QACA;QACA,cACAK,+CACAL;UACA;UACA,iDACA;YACA;cACAlD;cACAC;cACAC;cACAxB,MACA,oCACA,UACA;YACA;YACA;cACAsB;cACAC;cACAC;cACAxB,MACA,oCACA,QACA;YACA;YACA;cACAsB;cACAC;cACAC;cACAxB,MACA,oCACA,SACA;YACA;YACA;cACAsB;cACArB;YACA;UAAA,EACA;UACA;QACA;MACA;IACA;IACAqF;MACA;MACA;MACAC;QAAA;MAAA;MACA;IACA;IACAC;MAAA;MACA9B;QACAG;UACA;UACA;UACA;YACA;YACA;YACA;YACA;UACA;YACA;UACA;QACA;MACA;IACA;EAAA,EACA;EAEA4B;IACA;IAEA;EACA;EAEAC;IAAA;IACA;IACA;IACA;IACA;IAEA;MACA;MACA;MACA;MACA;MAEA;MACA;MACA;IACA;MACA;MACA;MACA;MACA;;MAEA;;MAEA;MACA;MACA;QACA;QACA;QACA;QAEAhC;UACAC;UACAC;UACAC;YACA;YAEA;UACA;QACA;MACA;IACA;MACA;MACA;MACAH;QACAC;QACAC;QACAC;UACA;QACA;MACA;IACA;EACA;EAEA8B;IACA;IACA;MACAjC;QACAkC;MACA;IACA,QACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACzuCA;AAAA;AAAA;AAAA;AAAksC,CAAgB,6lCAAG,EAAC,C;;;;;;;;;;;ACAttC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/home/home.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/home/home.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./home.vue?vue&type=template&id=92bb8f34&\"\nvar renderjs\nimport script from \"./home.vue?vue&type=script&lang=js&\"\nexport * from \"./home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./home.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/home/home.vue\"\nexport default component.exports","export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=template&id=92bb8f34&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uCircleProgress: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-circle-progress/u-circle-progress\" */ \"@/uni_modules/uview-ui/components/u-circle-progress/u-circle-progress.vue\"\n      )\n    },\n    uPicker: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-picker/u-picker\" */ \"@/uni_modules/uview-ui/components/u-picker/u-picker.vue\"\n      )\n    },\n    uModal: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-modal/u-modal\" */ \"@/uni_modules/uview-ui/components/u-modal/u-modal.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 =\n    ((_vm.archive && _vm.archive.code) || !_vm.isNewCode) &&\n    _vm.list.type == \"2\"\n      ? _vm.__map(_vm.list.inspections, function (item2, index) {\n          var $orig = _vm.__get_orig(item2)\n          var g0 = item2.time.split(\" \")\n          return {\n            $orig: $orig,\n            g0: g0,\n          }\n        })\n      : null\n  var l1 =\n    ((_vm.archive && _vm.archive.code) || !_vm.isNewCode) &&\n    !(_vm.list.type == \"2\")\n      ? _vm.__map(\n          _vm.list.improves.filter(function (i) {\n            return _vm.list.type == \"1\"\n              ? i.state == \"已整改\" || i.state == \"已完成\"\n              : i.state != \"已整改\" && i.state != \"已完成\"\n          }),\n          function (item, __i5__) {\n            var $orig = _vm.__get_orig(item)\n            var g1 = item.rtime ? item.rtime.split(\" \") : null\n            var g2 = item.time ? item.time.split(\" \") : null\n            return {\n              $orig: $orig,\n              g1: g1,\n              g2: g2,\n            }\n          }\n        )\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.showInfo = true\n    }\n    _vm.e1 = function ($event) {\n      _vm.showBlock = true\n    }\n    _vm.e2 = function ($event) {\n      _vm.showImprove = false\n    }\n    _vm.e3 = function ($event) {\n      _vm.showImprove = true\n    }\n    _vm.e4 = function ($event) {\n      _vm.showBlock = true\n    }\n    _vm.e5 = function ($event, item) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        item = _temp2.item\n      var _temp, _temp2\n      return _vm.selectChart(item)\n    }\n    _vm.e6 = function ($event, item) {\n      var _temp3 = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp4 = _temp3.eventParams || _temp3[\"event-params\"],\n        item = _temp4.item\n      var _temp3, _temp4\n      return _vm.onSelectImprove(item)\n    }\n    _vm.e7 = function ($event) {\n      _vm.showWorder = false\n    }\n    _vm.e8 = function ($event) {\n      _vm.showProject_stop = false\n    }\n    _vm.e9 = function ($event) {\n      _vm.showInfo = false\n    }\n    _vm.e10 = function ($event) {\n      _vm.getData()\n      _vm.showDetail = false\n    }\n    _vm.e11 = function ($event) {\n      _vm.showInspectionsDetail = false\n    }\n    _vm.e12 = function ($event) {\n      _vm.showBlock = true\n    }\n    _vm.e13 = function ($event) {\n      _vm.show = false\n    }\n    _vm.e14 = function ($event) {\n      _vm.showStartProject = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"p-home\" v-if=\"(archive && archive.code) || !isNewCode\">\n\t\t<view class=\"p-home__header\">\n\t\t\t<image class=\"img\" src=\"../../static/img/logo.png\"></image>\n\t\t\t<view class=\"name\">安全管理一件事</view>\n\t\t\t<view class=\"info\" @click=\"showInfo = true\">\n\t\t\t\t{{ me.name }}\n\t\t\t</view>\n\t\t</view>\n\t\t<box title=\"风险源信息\" class=\"p-home__info\" style=\"margin-top: 20rpx\">\n\t\t\t<view class=\"table\">\n\t\t\t\t<view\n\t\t\t\t\t:class=\"index == 0 ? 'th' : 'tr'\"\n\t\t\t\t\tv-for=\"(item, index) in info[archive.category1]\"\n\t\t\t\t\t:key=\"item.name\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"td name\">{{ item.name || '-' }}</view>\n\t\t\t\t\t<view class=\"td value\">\n\t\t\t\t\t\t{{ archive[item.value] || '-' }}\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"td name\" v-if=\"item.name2\">\n\t\t\t\t\t\t{{ item.name2 || '-' }}\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"td value\" v-if=\"item.name2\">\n\t\t\t\t\t\t{{ archive[item.value2] || '-' }}\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"item.value3\"\n\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\tcolor: archive[item.value3]\n\t\t\t\t\t\t\t\t\t? '#3ace3a'\n\t\t\t\t\t\t\t\t\t: '#ccc',\n\t\t\t\t\t\t\t\tfontSize: '32rpx',\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ archive[item.value3] ? '√' : '○' }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</box>\n\t\t<box title=\"安全检查\" class=\"p-home__info\" style=\"margin-top: 20rpx\">\n\t\t\t<view slot=\"title2\" class=\"block\" @click=\"showBlock = true\">\n\t\t\t\t{{ selectBlock.name }}\n\t\t\t\t<u-icon name=\"arrow-down\"></u-icon>\n\t\t\t</view>\n\t\t\t<safe\n\t\t\t\tv-if=\"hasInBlock\"\n\t\t\t\t:block=\"selectBlock.code\"\n\t\t\t\t@onClose=\"showImprove = false\"\n\t\t\t\t@onAdd=\"showImprove = true\"\n\t\t\t></safe>\n\t\t\t<view v-else class=\"desc\">请前往该工程区域!</view>\n\t\t</box>\n\t\t<box\n\t\t\ttitle=\"工程项目\"\n\t\t\tclass=\"p-home__info\"\n\t\t\tstyle=\"margin-top: 20rpx\"\n\t\t\tv-if=\"archive.category1 == '工程'\"\n\t\t>\n\t\t\t<view class=\"items\">\n\t\t\t\t<view\n\t\t\t\t\tclass=\"item\"\n\t\t\t\t\tv-for=\"item in projects\"\n\t\t\t\t\t:key=\"item.name\"\n\t\t\t\t\t@click=\"go(item)\"\n\t\t\t\t>\n\t\t\t\t\t<image class=\"img\" :src=\"item.icon\"></image>\n\t\t\t\t\t<view class=\"name\">\n\t\t\t\t\t\t{{ item.name }}\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</box>\n\t\t<box\n\t\t\ttitle=\"有限空间\"\n\t\t\tclass=\"p-home__info\"\n\t\t\tstyle=\"margin-top: 20rpx\"\n\t\t\tv-if=\"archive.category1 == '特种作业'\"\n\t\t>\n\t\t\t<view slot=\"title2\" class=\"block\" @click=\"showBlock = true\">\n\t\t\t\t{{ selectBlock.name }}\n\t\t\t\t<u-icon name=\"arrow-down\"></u-icon>\n\t\t\t</view>\n\t\t\t<view class=\"items\" v-if=\"hasInBlock\">\n\t\t\t\t<view\n\t\t\t\t\tclass=\"item\"\n\t\t\t\t\tv-for=\"item in actions\"\n\t\t\t\t\t:key=\"item.name\"\n\t\t\t\t\t@click=\"go(item)\"\n\t\t\t\t>\n\t\t\t\t\t<image class=\"img\" :src=\"item.icon\"></image>\n\t\t\t\t\t<view class=\"name\">\n\t\t\t\t\t\t{{ item.name }}\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view v-else class=\"desc\">请前往该工程区域!</view>\n\t\t</box>\n\n\t\t<box title=\"统计图表\" class=\"p-home__info\" style=\"margin-top: 20rpx\">\n\t\t\t<view class=\"charts\">\n\t\t\t\t<view class=\"select\" v-if=\"archive.category1 != '特种作业'\">\n\t\t\t\t\t<view class=\"btns\" style=\"width: 160rpx\">\n\t\t\t\t\t\t<view\n\t\t\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t\t\t@click=\"selectChartType(btn)\"\n\t\t\t\t\t\t\t:class=\"{ btned: btn.value == charts.type }\"\n\t\t\t\t\t\t\tv-for=\"btn in charts.types\"\n\t\t\t\t\t\t\t:key=\"btn.value\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ btn.name }}\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view\n\t\t\t\t\t\tclass=\"name\"\n\t\t\t\t\t\t@click=\"selectChart(item)\"\n\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\tborderColor:\n\t\t\t\t\t\t\t\tcharts.index == item\n\t\t\t\t\t\t\t\t\t? charts[item].color\n\t\t\t\t\t\t\t\t\t: '#ccc',\n\t\t\t\t\t\t\tcolor: charts.index == item ? '#000' : '#ccc',\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\tv-for=\"item in [1, 2, 3]\"\n\t\t\t\t\t\t:key=\"item\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ charts[item].name }}\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<u-circle-progress\n\t\t\t\t\tclass=\"chart\"\n\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t!charts.loading &&\n\t\t\t\t\t\t!charts.loading2 &&\n\t\t\t\t\t\tarchive.category1 != '特种作业'\n\t\t\t\t\t\"\n\t\t\t\t\tv-show=\"\n\t\t\t\t\t\t!showWorder &&\n\t\t\t\t\t\t!showBlock &&\n\t\t\t\t\t\t!showImprove &&\n\t\t\t\t\t\t!showDetail &&\n\t\t\t\t\t\t!showInfo &&\n\t\t\t\t\t\t!show &&\n\t\t\t\t\t\t!showInspectionsDetail &&\n\t\t\t\t\t\t!showStartProject &&\n\t\t\t\t\t\t!showProject_stop\n\t\t\t\t\t\"\n\t\t\t\t\t:active-color=\"charts[charts.index].color\"\n\t\t\t\t\t:percent=\"charts[charts.index][charts.type]\"\n\t\t\t\t\twidth=\"260\"\n\t\t\t\t\t:duration=\"0\"\n\t\t\t\t\t:border-width=\"20\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"content\">\n\t\t\t\t\t\t<text class=\"name\">\n\t\t\t\t\t\t\t{{ charts.type == 'month' ? '月' : '年' }}检查率\n\t\t\t\t\t\t</text>\n\t\t\t\t\t\t<view\n\t\t\t\t\t\t\tclass=\"value\"\n\t\t\t\t\t\t\t:style=\"{ color: charts[charts.index].color }\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ charts[charts.index][charts.type] }}%\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</u-circle-progress>\n\t\t\t\t<u-circle-progress\n\t\t\t\t\tv-if=\"!charts.loading2\"\n\t\t\t\t\tclass=\"chart\"\n\t\t\t\t\t:active-color=\"charts[4].color\"\n\t\t\t\t\tv-show=\"\n\t\t\t\t\t\t!showWorder &&\n\t\t\t\t\t\t!showBlock &&\n\t\t\t\t\t\t!showImprove &&\n\t\t\t\t\t\t!showDetail &&\n\t\t\t\t\t\t!showInfo &&\n\t\t\t\t\t\t!show &&\n\t\t\t\t\t\t!showInspectionsDetail &&\n\t\t\t\t\t\t!showStartProject &&\n\t\t\t\t\t\t!showProject_stop\n\t\t\t\t\t\"\n\t\t\t\t\t:percent=\"charts[4].value\"\n\t\t\t\t\twidth=\"260\"\n\t\t\t\t\t:duration=\"0\"\n\t\t\t\t\t:border-width=\"20\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"content\">\n\t\t\t\t\t\t<text class=\"name\">隐患整改完成率</text>\n\t\t\t\t\t\t<view class=\"value\" :style=\"{ color: charts[4].color }\">\n\t\t\t\t\t\t\t{{ charts[4].value }}%\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</u-circle-progress>\n\t\t\t</view>\n\t\t</box>\n\t\t<box\n\t\t\ttitle=\"隐患及检查记录台账\"\n\t\t\tclass=\"p-home__info\"\n\t\t\tstyle=\"margin-top: 20rpx\"\n\t\t>\n\t\t\t<view class=\"btns\">\n\t\t\t\t<view\n\t\t\t\t\tclass=\"btn\"\n\t\t\t\t\t@click=\"selectListType(btn)\"\n\t\t\t\t\t:class=\"{ btned: btn.value == list.type }\"\n\t\t\t\t\tv-for=\"btn in list.types\"\n\t\t\t\t\t:key=\"btn.value\"\n\t\t\t\t>\n\t\t\t\t\t{{ btn.name }}\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"table table2\" v-if=\"list.type == '2'\">\n\t\t\t\t<view class=\"th\">\n\t\t\t\t\t<view class=\"td\" style=\"width: 10%\">序号</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 20%\">检查时间</view>\n\n\t\t\t\t\t<view class=\"td\" style=\"width: 15%\">检查人</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 25%\">检查单位</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 15%\">隐患情况</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 15%\">整改情况</view>\n\t\t\t\t</view>\n\t\t\t\t<view\n\t\t\t\t\tclass=\"tr\"\n\t\t\t\t\tv-for=\"(item2, index) in list.inspections\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"td\" style=\"width: 10%\">{{ index + 1 }}</view>\n\t\t\t\t\t<view\n\t\t\t\t\t\tclass=\"td\"\n\t\t\t\t\t\tstyle=\"width: 20%; color: #3c9cff\"\n\t\t\t\t\t\t@click=\"onSelectInspections(item2)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ item2.time.split(' ')[0] }}\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 15%\">{{ item2.user }}</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 25%\">\n\t\t\t\t\t\t{{ item2.company }}\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 15%\">\n\t\t\t\t\t\t{{ item2.improve_situation }}\n\t\t\t\t\t</view>\n\t\t\t\t\t<view\n\t\t\t\t\t\tclass=\"td\"\n\t\t\t\t\t\tstyle=\"width: 15%; color: #3c9cff\"\n\t\t\t\t\t\t@click=\"onSelectInspection(item2)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ item2.improve_state }}\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<view class=\"table table2\" v-else>\n\t\t\t\t<view class=\"th\">\n\t\t\t\t\t<view class=\"td\" style=\"width: 20%\">隐患名称</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 20%\">发现时间</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 25%\">整改措施</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 20%\">整改时间</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 15%\">隐患状态</view>\n\t\t\t\t</view>\n\t\t\t\t<view\n\t\t\t\t\tclass=\"tr\"\n\t\t\t\t\tv-for=\"item in list.improves.filter((i) =>\n\t\t\t\t\t\tlist.type == '1'\n\t\t\t\t\t\t\t? i.state == '已整改' || i.state == '已完成'\n\t\t\t\t\t\t\t: i.state != '已整改' && i.state != '已完成',\n\t\t\t\t\t)\"\n\t\t\t\t\t:key=\"item.code\"\n\t\t\t\t\t@click=\"onSelectImprove(item)\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"td line\" style=\"width: 20%\">\n\t\t\t\t\t\t{{ item.name || '-' }}\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 20%; color: #3c9cff\">\n\t\t\t\t\t\t{{ item.rtime ? item.rtime.split(' ')[0] : '-' }}\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"td line\" style=\"width: 25%\">\n\t\t\t\t\t\t{{ item.method || '-' }}\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 20%\">\n\t\t\t\t\t\t{{ item.time ? item.time.split(' ')[0] : '-' }}\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 15%\">{{ item.state }}</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</box>\n\t\t<box\n\t\t\ttitle=\"停工记录\"\n\t\t\tclass=\"p-home__info\"\n\t\t\tstyle=\"margin-top: 20rpx\"\n\t\t\tv-if=\"archive.category1 === '工程'\"\n\t\t>\n\t\t\t<view class=\"table table2\">\n\t\t\t\t<view class=\"th\">\n\t\t\t\t\t<view class=\"td\" style=\"width: 10%\">序号</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 20%\">申请人</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 20%\">区块名称</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 25%\">停工开始日期</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 25%\">停工结束日期</view>\n\t\t\t\t</view>\n\t\t\t\t<view\n\t\t\t\t\tclass=\"tr\"\n\t\t\t\t\tv-for=\"(item2, index) in stopList.data\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"td\" style=\"width: 10%\">{{ index + 1 }}</view>\n\n\t\t\t\t\t<view class=\"td\" style=\"width: 20%\">\n\t\t\t\t\t\t{{ item2.applicants }}\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 20%\">\n\t\t\t\t\t\t{{ item2.blockName }}\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 25%; color: #3c9cff\">\n\t\t\t\t\t\t{{ item2.startDate }}\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"td\" style=\"width: 25%; color: #3c9cff\">\n\t\t\t\t\t\t{{ item2.endDate }}\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</box>\n\t\t<worker\n\t\t\t:block=\"selectBlock.code\"\n\t\t\tv-if=\"showWorder\"\n\t\t\t@onClose=\"showWorder = false\"\n\t\t></worker>\n\t\t<projectStop\n\t\t\tv-if=\"showProject_stop\"\n\t\t\t@onClose=\"showProject_stop = false\"\n\t\t></projectStop>\n\t\t<info\n\t\t\tv-if=\"showInfo\"\n\t\t\t@onClose=\"showInfo = false\"\n\t\t\t:positions=\"positions\"\n\t\t\t:positionAccuracy=\"positionAccuracy\"\n\t\t></info>\n\t\t<improveDetail\n\t\t\t:item=\"selectImprove\"\n\t\t\t:items=\"improvesDto\"\n\t\t\tv-if=\"showDetail\"\n\t\t\t@onClose=\"\n\t\t\t\tgetData()\n\t\t\t\tshowDetail = false\n\t\t\t\"\n\t\t></improveDetail>\n\t\t<inspectionsDetail\n\t\t\t:items=\"checkDetailDto\"\n\t\t\tv-if=\"showInspectionsDetail\"\n\t\t\t@onClose=\"showInspectionsDetail = false\"\n\t\t></inspectionsDetail>\n\t\t<u-picker\n\t\t\tv-if=\"!show\"\n\t\t\t:show=\"showBlock\"\n\t\t\t:columns=\"[archive.block]\"\n\t\t\tkeyName=\"name\"\n\t\t\t@confirm=\"onSelectConfirm\"\n\t\t\t@cancel=\"onSelectCancel\"\n\t\t></u-picker>\n\t\t<u-modal\n\t\t\t:show=\"show\"\n\t\t\t:title=\"' '\"\n\t\t\t:content=\"' '\"\n\t\t\t@cancel=\"onCancel\"\n\t\t\t:showConfirmButton=\"false\"\n\t\t>\n\t\t\t<view class=\"c-info2\">\n\t\t\t\t<view class=\"c-info2__table\">\n\t\t\t\t\t<view class=\"th\">\n\t\t\t\t\t\t<view class=\"td\" style=\"width: 100%\">工程完工</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"tr\">\n\t\t\t\t\t\t<view class=\"td\" style=\"width: 30%\">区块</view>\n\t\t\t\t\t\t<view\n\t\t\t\t\t\t\tclass=\"td value\"\n\t\t\t\t\t\t\tstyle=\"width: 70%\"\n\t\t\t\t\t\t\t@click=\"showBlock = true\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ selectBlock.name }}\n\t\t\t\t\t\t\t<u-icon name=\"arrow-down\"></u-icon>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"c-info2__footer\" slot=\"confirmButton\">\n\t\t\t\t\t<view class=\"btn\" @click=\"show = false\">取消</view>\n\t\t\t\t\t<view class=\"btn btn2\" @click=\"onSubmitProjectEnd\">\n\t\t\t\t\t\t确定\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<u-picker\n\t\t\t\tv-if=\"show\"\n\t\t\t\t:show=\"showBlock\"\n\t\t\t\t:columns=\"[archive.block]\"\n\t\t\t\tkeyName=\"name\"\n\t\t\t\t@confirm=\"onSelectConfirm\"\n\t\t\t\t@cancel=\"onSelectCancel\"\n\t\t\t></u-picker>\n\t\t</u-modal>\n\t\t<u-modal\n\t\t\t:show=\"showStartProject\"\n\t\t\t:title=\"' '\"\n\t\t\t:content=\"' '\"\n\t\t\t@cancel=\"onCancel\"\n\t\t\t:showConfirmButton=\"false\"\n\t\t>\n\t\t\t<view class=\"c-info2\">\n\t\t\t\t<view class=\"c-info2__table\">\n\t\t\t\t\t<view class=\"th\">\n\t\t\t\t\t\t<view class=\"td\" style=\"width: 100%\">当日签到</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"tr\">\n\t\t\t\t\t\t<view class=\"td\" style=\"width: 30%\">备注</view>\n\t\t\t\t\t\t<view class=\"td value\" style=\"width: 70%\">\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\t\t\ttext-align: left;\n\t\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t\t\theight: 120rpx;\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\tv-model=\"startProject.node\"\n\t\t\t\t\t\t\t\tplaceholder=\"请输入\"\n\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"c-info2__footer\" slot=\"confirmButton\">\n\t\t\t\t\t<view class=\"btn\" @click=\"showStartProject = false\">\n\t\t\t\t\t\t取消\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"btn btn2\" @click=\"onSubmitProjectStart\">\n\t\t\t\t\t\t确定\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</u-modal>\n\t</view>\n</template>\n<script>\nimport box from '@/components/box.vue'\nimport safe from './safe.vue'\nimport worker from './work.vue'\nimport projectStop from './projectStop.vue'\nimport improveDetail from './improve.vue'\nimport inspectionsDetail from './inspectionsDetail.vue'\nimport info from './info.vue'\nimport { mapState, mapActions, mapMutations } from 'vuex'\nimport turf from '@/uni_modules/@turf/boolean-point-in-polygon'\nimport pointToLineDistance from '@/uni_modules/@turf/point-to-line-distance'\nimport transformCoordinate from '@/libs/transformCoordinate.js'\nexport default {\n\tcomponents: {\n\t\tbox,\n\t\tsafe,\n\t\tworker,\n\t\timproveDetail,\n\t\tinfo,\n\t\tinspectionsDetail,\n\t\tprojectStop,\n\t},\n\tcomputed: {\n\t\t...mapState('common', ['archiveId', 'archive', 'users', 'me']),\n\t\t// ...mapState(['isScan'])\n\t},\n\twatch: {\n\t\tarchive() {\n\t\t\tif ((this.archive || {}).category1 == '特种作业') {\n\t\t\t\tthis.hasInBlock = true\n\t\t\t}\n\t\t\tif ((this.archive || {}).id) {\n\t\t\t\tif (this.positions) {\n\t\t\t\t\tthis.init2()\n\t\t\t\t} else {\n\t\t\t\t\tthis.getLocation()\n\t\t\t\t}\n\n\t\t\t\tthis.getData()\n\t\t\t}\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisScan: true,\n\t\t\tisNewCode: false,\n\t\t\tcheckDetailDto: [],\n\t\t\timprovesDto: [],\n\t\t\thasInBlock: false,\n\t\t\tshow: false,\n\t\t\tshowInfo: false,\n\t\t\tselectImprove: {},\n\t\t\tshowDetail: false,\n\t\t\tshowInspectionsDetail: false,\n\t\t\tshowImprove: false,\n\t\t\tpositionAccuracy: 100,\n\n\t\t\tpositions: null,\n\t\t\tshowBlock: false,\n\t\t\tselectBlock: {},\n\t\t\tshowWorder: false,\n\t\t\tshowProject_stop: false,\n\t\t\tshowStartProject: false,\n\t\t\tstartProject: {\n\t\t\t\tnode: '',\n\t\t\t},\n\t\t\tinfo: {\n\t\t\t\tcategory: '场所',\n\t\t\t\t场所: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '场所名称',\n\t\t\t\t\t\tvalue: 'name',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '主要负责人',\n\t\t\t\t\t\tvalue: 'project_charge',\n\t\t\t\t\t\tname2: '检查频次要求',\n\t\t\t\t\t\tvalue2: 'project_charge_rate',\n\t\t\t\t\t\tvalue3: 'chargeIsCheck',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '责任人',\n\t\t\t\t\t\tvalue: 'project_manager',\n\t\t\t\t\t\tname2: '检查频次要求',\n\t\t\t\t\t\tvalue2: 'project_manager_rate',\n\t\t\t\t\t\tvalue3: 'managerIsCheck',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '运维人员',\n\t\t\t\t\t\tvalue: 'supervisor',\n\t\t\t\t\t\tname2: '检查频次要求',\n\t\t\t\t\t\tvalue2: 'supervisor_rate',\n\t\t\t\t\t\tvalue3: 'supervisorIsCheck',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\t工程: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '项目名称',\n\t\t\t\t\t\tvalue: 'name',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t// \tname: \"项目标段\",\n\t\t\t\t\t\t// \tvalue: \"lot\"\n\t\t\t\t\t\t// }, {\n\t\t\t\t\t\tname: '项目负责人',\n\t\t\t\t\t\tvalue: 'project_charge',\n\t\t\t\t\t\tname2: '检查频次要求',\n\t\t\t\t\t\tvalue2: 'project_charge_rate',\n\t\t\t\t\t\tvalue3: 'chargeIsCheck',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '项目经理',\n\t\t\t\t\t\tvalue: 'project_manager',\n\t\t\t\t\t\tname2: '检查频次要求',\n\t\t\t\t\t\tvalue2: 'project_manager_rate',\n\t\t\t\t\t\tvalue3: 'managerIsCheck',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '监理',\n\t\t\t\t\t\tvalue: 'supervisor',\n\t\t\t\t\t\tname2: '检查频次要求',\n\t\t\t\t\t\tvalue2: 'supervisor_rate',\n\t\t\t\t\t\tvalue3: 'supervisorIsCheck',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\t特种作业: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '作业名称',\n\t\t\t\t\t\tvalue: 'name',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '作业地点',\n\t\t\t\t\t\tvalue: 'address',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '计划开始时间',\n\t\t\t\t\t\tvalue: 'plan_stime',\n\t\t\t\t\t\tname2: '计划结束时间',\n\t\t\t\t\t\tvalue2: 'plan_etime',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '安全员',\n\t\t\t\t\t\tvalue: 'safety',\n\t\t\t\t\t\tname2: '现场负责人',\n\t\t\t\t\t\tvalue2: 'site_charge',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '施工监护人',\n\t\t\t\t\t\tvalue: 'caretaker',\n\t\t\t\t\t\tname2: '施工负责人',\n\t\t\t\t\t\tvalue2: 'worker_charge',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\tlist: {\n\t\t\t\ttype: '0',\n\t\t\t\ttypes: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '未整改隐患',\n\t\t\t\t\t\tvalue: '0',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '已整改隐患',\n\t\t\t\t\t\tvalue: '1',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '检查记录',\n\t\t\t\t\t\tvalue: '2',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tinspections: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttime: '2022-02-02',\n\t\t\t\t\t\tcompany: 'sssss',\n\t\t\t\t\t\tuser: '汪汪汪',\n\t\t\t\t\t\timprove_situation: '无',\n\t\t\t\t\t\timprove_state: '无',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\timproves: [],\n\t\t\t},\n\t\t\tstopList: {\n\t\t\t\tdata: [],\n\t\t\t},\n\t\t\tcharts: {\n\t\t\t\ttypes: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '月',\n\t\t\t\t\t\tvalue: 'month',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '年',\n\t\t\t\t\t\tvalue: 'year',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tloading: false,\n\t\t\t\tloading2: false,\n\t\t\t\ttype: 'month',\n\t\t\t\tindex: 1,\n\t\t\t\t1: {\n\t\t\t\t\tcolor: '#0db0f4',\n\t\t\t\t\tmonth: 11,\n\t\t\t\t\tyear: 21,\n\t\t\t\t\tname: '主要负责人',\n\t\t\t\t},\n\t\t\t\t2: {\n\t\t\t\t\tcolor: '#f59a23',\n\t\t\t\t\tmonth: 11,\n\t\t\t\t\tyear: 21,\n\t\t\t\t\tname: '责任人',\n\t\t\t\t},\n\t\t\t\t3: {\n\t\t\t\t\tcolor: '#8cc63f',\n\t\t\t\t\tmonth: 11,\n\t\t\t\t\tyear: 21,\n\t\t\t\t\tname: '运维人员',\n\t\t\t\t},\n\t\t\t\t4: {\n\t\t\t\t\tcolor: '#a30014',\n\t\t\t\t\tvalue: 11,\n\t\t\t\t},\n\t\t\t},\n\t\t\tprojects: [\n\t\t\t\t{\n\t\t\t\t\tname: '当日签到',\n\t\t\t\t\ticon: require('@/static/img/qiandao.png'),\n\t\t\t\t\tpath: '../safe/safe',\n\t\t\t\t\tid: 'project_start',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: '工程停工',\n\t\t\t\t\ticon: require('@/static/img/stop.png'),\n\t\t\t\t\tpath: '../safe/safe',\n\t\t\t\t\tid: 'project_stop',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: '工程完工',\n\t\t\t\t\ticon: require('@/static/img/end.png'),\n\t\t\t\t\tpath: '../improve/improve',\n\t\t\t\t\tid: 'project_end',\n\t\t\t\t},\n\t\t\t],\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tname: '作业签到',\n\t\t\t\t\ticon: require('@/static/img/qiandao.png'),\n\t\t\t\t\t// path: '../safe/safe',\n\t\t\t\t\tid: 'worker_start',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: '作业审批',\n\t\t\t\t\ticon: require('@/static/img/shenpi.png'),\n\t\t\t\t\t// path: '../improve/improve',\n\t\t\t\t\tid: 'worker',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: '作业签退',\n\t\t\t\t\ticon: require('@/static/img/qiantui.png'),\n\t\t\t\t\t// path: '../improve/improve',\n\t\t\t\t\tid: 'worker_end',\n\t\t\t\t},\n\t\t\t],\n\t\t}\n\t},\n\tmethods: {\n\t\t...mapActions('common', ['init']),\n\t\t...mapMutations('common', ['set_archiveId']),\n\t\tonSelectImprove(item) {\n\t\t\tthis.selectImprove = item\n\t\t\tthis.improvesDto = [item]\n\t\t\tthis.showDetail = true\n\t\t},\n\t\tonSelectInspection(item) {\n\t\t\tif (\n\t\t\t\titem.improve_situation == '有' &&\n\t\t\t\t((item || {}).improvesDto || []).length\n\t\t\t) {\n\t\t\t\tthis.improvesDto = item.improvesDto\n\t\t\t\tthis.selectImprove = item.improvesDto[0]\n\t\t\t\tthis.showDetail = true\n\t\t\t}\n\t\t},\n\t\tonSelectInspections(item) {\n\t\t\tif (((item || {}).checkDetailDto || []).length) {\n\t\t\t\tthis.checkDetailDto = []\n\t\t\t\tlet checkDetailDto = []\n\t\t\t\titem.checkDetailDto.forEach((i, index) => {\n\t\t\t\t\tif (index == 0 || i.project == checkDetailDto[0].project) {\n\t\t\t\t\t\tcheckDetailDto.push(i)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.checkDetailDto.push(checkDetailDto)\n\t\t\t\t\t\tcheckDetailDto = [i]\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tthis.checkDetailDto.push(checkDetailDto)\n\t\t\t\tthis.showInspectionsDetail = true\n\t\t\t}\n\t\t},\n\t\tgetHasInBlock() {\n\t\t\tif (this.archive.category1 == '特种作业') {\n\t\t\t\tthis.hasInBlock = true\n\t\t\t} else {\n\t\t\t\tif (this.positions && this.selectBlock.position) {\n\t\t\t\t\tlet hasInBlock = false\n\t\t\t\t\t;(\n\t\t\t\t\t\t(JSON.parse(this.selectBlock.position) || {})\n\t\t\t\t\t\t\t.features || []\n\t\t\t\t\t).forEach((i) => {\n\t\t\t\t\t\thasInBlock =\n\t\t\t\t\t\t\thasInBlock ||\n\t\t\t\t\t\t\tturf(this.positions, i.geometry) ||\n\t\t\t\t\t\t\tparseInt(\n\t\t\t\t\t\t\t\tpointToLineDistance(\n\t\t\t\t\t\t\t\t\tthis.positions,\n\t\t\t\t\t\t\t\t\ti.geometry.coordinates[0],\n\t\t\t\t\t\t\t\t\t{ units: 'meters' },\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t) <\n\t\t\t\t\t\t\t\tthis.positionAccuracy * 2 + 100\n\t\t\t\t\t})\n\t\t\t\t\tthis.hasInBlock = hasInBlock\n\t\t\t\t} else {\n\t\t\t\t\tthis.hasInBlock = false\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgetDistance(lng1, lat1, lng2, lat2) {\n\t\t\tlet f = (((lat1 + lat2) / 2) * Math.PI) / 180.0\n\t\t\tlet g = (((lat1 - lat2) / 2) * Math.PI) / 180.0\n\t\t\tlet l = (((lng1 - lng2) / 2) * Math.PI) / 180.0\n\n\t\t\tlet sg = Math.sin(g)\n\t\t\tlet sl = Math.sin(l)\n\t\t\tlet sf = Math.sin(f)\n\n\t\t\tlet s, c, w, r, d, h1, h2\n\t\t\tlet a = 6378137.0\n\t\t\tlet fl = 1 / 298.257\n\n\t\t\tsg = sg * sg\n\t\t\tsl = sl * sl\n\t\t\tsf = sf * sf\n\n\t\t\ts = sg * (1 - sl) + (1 - sf) * sl\n\t\t\tc = (1 - sg) * (1 - sl) + sf * sl\n\n\t\t\tw = Math.atan(Math.sqrt(s / c))\n\t\t\tr = Math.sqrt(s * c) / w\n\t\t\td = 2 * w * a\n\t\t\th1 = (3 * r - 1) / 2 / c\n\t\t\th2 = (3 * r + 1) / 2 / s\n\n\t\t\treturn d * (1 + fl * (h1 * sf * (1 - sg) - h2 * (1 - sf) * sg))\n\t\t},\n\t\tonSelectConfirm(e) {\n\t\t\tthis.selectBlock = e.value[0]\n\t\t\tthis.showBlock = false\n\t\t\tthis.getHasInBlock()\n\t\t},\n\t\tonSelectCancel() {\n\t\t\tthis.showBlock = false\n\t\t},\n\t\tinit2() {\n\t\t\tif ((this.archive || {}).block && this.isNewCode == true) {\n\t\t\t\tthis.isNewCode = false\n\t\t\t\tif (this.positions) {\n\t\t\t\t\tlet length = null\n\t\t\t\t\tlet lengthIndex = 0\n\t\t\t\t\t;(this.archive || {}).block.map((i, index) => {\n\t\t\t\t\t\tif (i.position) {\n\t\t\t\t\t\t\t;(\n\t\t\t\t\t\t\t\t(JSON.parse(i.position) || {}).features || []\n\t\t\t\t\t\t\t).forEach((p) => {\n\t\t\t\t\t\t\t\tlengthIndex =\n\t\t\t\t\t\t\t\t\tturf(this.positions, p.geometry) ||\n\t\t\t\t\t\t\t\t\tparseInt(\n\t\t\t\t\t\t\t\t\t\tpointToLineDistance(\n\t\t\t\t\t\t\t\t\t\t\tthis.positions,\n\t\t\t\t\t\t\t\t\t\t\tp.geometry.coordinates[0],\n\t\t\t\t\t\t\t\t\t\t\t{ units: 'meters' },\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t) <\n\t\t\t\t\t\t\t\t\t\tthis.positionAccuracy * 2 + 100\n\t\t\t\t\t\t\t\t\t\t? index\n\t\t\t\t\t\t\t\t\t\t: lengthIndex\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tthis.selectBlock = this.archive.block[lengthIndex]\n\t\t\t\t\tthis.getHasInBlock()\n\t\t\t\t} else {\n\t\t\t\t\tthis.selectBlock = this.archive.block[0]\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgo(item) {\n\t\t\tif (item.id == 'worker_start') {\n\t\t\t\tthis.onSubmitWorkStart()\n\t\t\t} else if (item.id == 'worker_end') {\n\t\t\t\tthis.onSubmitWorkEnd()\n\t\t\t} else if (item.id == 'worker') {\n\t\t\t\tthis.showWorder = true\n\t\t\t} else if (item.id == 'project_stop') {\n\t\t\t\tif (\n\t\t\t\t\tthis.users.find((i) => i == this.me.id) ||\n\t\t\t\t\tthis.archive.project_charge_id.indexOf(this.me.id) > -1\n\t\t\t\t) {\n\t\t\t\t\tthis.showProject_stop = true\n\t\t\t\t} else {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '您不是该工程监理/负责人员！',\n\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\tsuccess: () => {},\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} else if (item.id == 'project_end') {\n\t\t\t\tif (this.users.find((i) => i == this.me.id)) {\n\t\t\t\t\tthis.show = true\n\t\t\t\t} else {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '您不是该工程监理人员！',\n\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\tsuccess: () => {},\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} else if (item.id == 'project_start') {\n\t\t\t\tif (this.hasInBlock) {\n\t\t\t\t\tthis.showStartProject = true\n\t\t\t\t} else {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '请前往该工程区域！',\n\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\tsuccess: () => {},\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tselectChart(item) {\n\t\t\tthis.charts.loading = true\n\t\t\tthis.charts.index = item\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.charts.loading = false\n\t\t\t})\n\t\t},\n\t\tselectChartType(item) {\n\t\t\tthis.charts.loading = true\n\t\t\tthis.charts.type = item.value\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.charts.loading = false\n\t\t\t})\n\t\t},\n\t\tselectListType(item) {\n\t\t\tthis.list.type = item.value\n\t\t},\n\t\tonSubmitProjectStart() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '确定当日签到吗？',\n\t\t\t\tsuccess: (e) => {\n\t\t\t\t\tif (e.confirm) {\n\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\ttitle: '提交中...',\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.$request\n\t\t\t\t\t\t\t.post(`signin`, {\n\t\t\t\t\t\t\t\tcode: this.archive.code,\n\t\t\t\t\t\t\t\tlbs_longitude: this.positions[0],\n\t\t\t\t\t\t\t\tlbs_latitude: this.positions[1],\n\t\t\t\t\t\t\t\tnote: this.startProject.node,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\tthis.showStartProject = false\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\ttitle: '操作成功！',\n\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\tsuccess: () => {},\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\t\tcontent: ((err || {}).data || {}).error,\n\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\t// onSubmitProjectStop() {\n\t\t// \tif (this.users.find(i => i == this.me.id)) {\n\t\t// \t\tuni.showModal({\n\t\t// \t\t\ttitle: \"提示\",\n\t\t// \t\t\tcontent: \"确定提交当日停工吗？\",\n\t\t// \t\t\tsuccess: e => {\n\t\t// \t\t\t\tif (e.confirm) {\n\t\t// \t\t\t\t\tuni.showLoading({\n\t\t// \t\t\t\t\t\ttitle: \"提交中...\"\n\t\t// \t\t\t\t\t});\n\t\t// \t\t\t\t\tthis.$request.post(`project/daystop`, {\n\t\t// \t\t\t\t\t\tcode: this.archive.code\n\t\t// \t\t\t\t\t}).then(res => {\n\t\t// \t\t\t\t\t\tuni.hideLoading();\n\t\t// \t\t\t\t\t\tuni.showModal({\n\t\t// \t\t\t\t\t\t\ttitle: \"操作成功！\",\n\t\t// \t\t\t\t\t\t\tshowCancel: false,\n\t\t// \t\t\t\t\t\t\tsuccess: () => {}\n\t\t// \t\t\t\t\t\t});\n\t\t// \t\t\t\t\t}).catch(err=>{\n\t\t// \t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t// \t\t\t\t\t\t\t\tuni.showModal({\n\t\t// \t\t\t\t\t\t\t\t\ttitle: \"提示\",\n\t\t// \t\t\t\t\t\t\t\t\tcontent: ((err||{}).data||{}).error,\n\t\t// \t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t// \t\t\t\t\t\t\t\t})\n\t\t// \t\t\t\t\t});\n\t\t// \t\t\t\t}\n\t\t// \t\t\t}\n\t\t// \t\t});\n\t\t// \t} else {\n\t\t// \t\tuni.showModal({\n\t\t// \t\t\ttitle: \"您不是该工程监理人员！\",\n\t\t// \t\t\tshowCancel: false,\n\t\t// \t\t\tsuccess: () => {}\n\t\t// \t\t});\n\t\t// \t}\n\n\t\t// },\n\t\tonSubmitProjectEnd() {\n\t\t\tif (this.users.find((i) => i == this.me.id)) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '确定提交工程完工吗？',\n\t\t\t\t\tsuccess: (e) => {\n\t\t\t\t\t\tif (e.confirm) {\n\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\ttitle: '提交中...',\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tthis.$request\n\t\t\t\t\t\t\t\t.post(`project/end`, {\n\t\t\t\t\t\t\t\t\tcode: this.archive.code,\n\t\t\t\t\t\t\t\t\tblockCode: this.selectBlock.code,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\ttitle: '操作成功！',\n\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\tsuccess: () => {},\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\t\t\tcontent: ((err || {}).data || {}).error,\n\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '您不是该工程监理人员！',\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tsuccess: () => {},\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tonSubmitWorkEnd() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '确定特种作业签退吗？',\n\t\t\t\tsuccess: (e) => {\n\t\t\t\t\tif (e.confirm) {\n\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\ttitle: '提交中...',\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.$request\n\t\t\t\t\t\t\t.get(`worker/signOut/${this.archive.code}`)\n\t\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\t\tuni.hideLoading()\n\n\t\t\t\t\t\t\t\tif (res.data.code == '200') {\n\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\ttitle: '签退成功！',\n\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\tsuccess: () => {},\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\t\t\t\t\tres.data.message ||\n\t\t\t\t\t\t\t\t\t\t\t'未进行作业签到！',\n\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\tsuccess: () => {},\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\t\tcontent: ((err || {}).data || {}).error,\n\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tonSubmitWorkStart() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '确定特种作业签到吗？',\n\t\t\t\tsuccess: (e) => {\n\t\t\t\t\tif (e.confirm) {\n\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\ttitle: '提交中...',\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.$request\n\t\t\t\t\t\t\t.get(`worker/signIn/${this.archive.code}`)\n\t\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\ttitle: '签到成功！',\n\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\tsuccess: () => {},\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\t\tcontent: ((err || {}).data || {}).error,\n\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tgetLocation() {\n\t\t\tif ((this.me || {}).id) {\n\t\t\t\tuni.getLocation({\n\t\t\t\t\ttype: 'gcj02',\n\t\t\t\t\tisHighAccuracy: true,\n\t\t\t\t\tsuccess: (e) => {\n\t\t\t\t\t\tif (e.errMsg == 'getLocation:ok') {\n\t\t\t\t\t\t\tconsole.log(e)\n\n\t\t\t\t\t\t\tthis.positions = transformCoordinate.gcj02towgs84(\n\t\t\t\t\t\t\t\te.longitude,\n\t\t\t\t\t\t\t\te.latitude,\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t// this.positions = [e.longitude,e.latitude]\n\t\t\t\t\t\t\tthis.positionAccuracy = e.accuracy || 0\n\t\t\t\t\t\t\tthis.init2()\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (e) => {},\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\tgetData() {\n\t\t\tthis.charts.loading = true\n\t\t\tif ((this.archive || {}).code) {\n\t\t\t\tthis.$request\n\t\t\t\t\t.get(`${(this.archive || {}).code}/inspections`)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tthis.list.inspections = res.data.data || []\n\t\t\t\t\t})\n\t\t\t\tthis.$request\n\t\t\t\t\t.get(`new/improves?code=${(this.archive || {}).code}`)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tthis.list.improves = res.data.data || []\n\t\t\t\t\t})\n\t\t\t\tthis.$request\n\t\t\t\t\t.get(`/stop/records?code=${(this.archive || {}).code}`)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tthis.stopList.data = res.data.data || []\n\t\t\t\t\t})\n\t\t\t\tthis.$request\n\t\t\t\t\t.get(`stat/${(this.archive || {}).code}`)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tlet data = res.data.data || {}\n\t\t\t\t\t\tthis.charts = {\n\t\t\t\t\t\t\t...this.charts,\n\t\t\t\t\t\t\t1: {\n\t\t\t\t\t\t\t\tcolor: '#0db0f4',\n\t\t\t\t\t\t\t\tmonth: data.charge_month || '0',\n\t\t\t\t\t\t\t\tyear: data.charge_year || '0',\n\t\t\t\t\t\t\t\tname:\n\t\t\t\t\t\t\t\t\tthis.archive.category1 == '场所'\n\t\t\t\t\t\t\t\t\t\t? '主要负责人'\n\t\t\t\t\t\t\t\t\t\t: '项目负责人',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t2: {\n\t\t\t\t\t\t\t\tcolor: '#f59a23',\n\t\t\t\t\t\t\t\tmonth: data.manager_month || '0',\n\t\t\t\t\t\t\t\tyear: data.manager_year || '0',\n\t\t\t\t\t\t\t\tname:\n\t\t\t\t\t\t\t\t\tthis.archive.category1 == '场所'\n\t\t\t\t\t\t\t\t\t\t? '责任人'\n\t\t\t\t\t\t\t\t\t\t: '项目经理',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t3: {\n\t\t\t\t\t\t\t\tcolor: '#8cc63f',\n\t\t\t\t\t\t\t\tmonth: data.supervisor_month || 0,\n\t\t\t\t\t\t\t\tyear: data.supervisor_year || '0',\n\t\t\t\t\t\t\t\tname:\n\t\t\t\t\t\t\t\t\tthis.archive.category1 == '场所'\n\t\t\t\t\t\t\t\t\t\t? '运维人员'\n\t\t\t\t\t\t\t\t\t\t: '监理',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t4: {\n\t\t\t\t\t\t\t\tcolor: '#a30014',\n\t\t\t\t\t\t\t\tvalue: data.improves || '0',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.charts.loading = false\n\t\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tgetUrlParam(url) {\n\t\t\tlet params = url.split('?')[1].split('&')\n\t\t\tlet obj = {}\n\t\t\tparams.map((v) => (obj[v.split('=')[0]] = v.split('=')[1]))\n\t\t\treturn obj\n\t\t},\n\t\tsearchCode() {\n\t\t\tuni.scanCode({\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t//小程序扫描二维码进来的\n\t\t\t\t\tconst code = (res.result.split('=') || [])[1]\n\t\t\t\t\tif (code) {\n\t\t\t\t\t\tthis.set_archiveId(code)\n\t\t\t\t\t\tthis.init()\n\t\t\t\t\t\tthis.getData()\n\t\t\t\t\t\tthis.getLocation()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.searchCode()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t},\n\n\tonReady() {\n\t\tthis.isScan = false\n\n\t\tthis.isNewCode = true\n\t},\n\n\tonShow() {\n\t\t// if (this.archiveId) return false\n\t\tlet pages = getCurrentPages()\n\t\tlet currentPages = pages[pages.length - 1]\n\t\tlet p = currentPages.options\n\n\t\tif (p.q) {\n\t\t\t//微信扫描扫描二维码进来的\n\t\t\tlet url = decodeURIComponent(p.q)\n\t\t\tlet obj = this.getUrlParam(url)\n\t\t\tthis.set_archiveId(obj.code)\n\n\t\t\tthis.init()\n\t\t\tthis.getData()\n\t\t\tthis.getLocation()\n\t\t} else if (pages.length == 1) {\n\t\t\t//http://oa.hnswjt.com:8828/safe?code=A202300010\n\t\t\t//A202300010\n\t\t\t//A202300023\n\t\t\t//ZYBA2023020010\n\n\t\t\t// if (this.archiveId) return false\n\n\t\t\t// this.set_archiveId(\"ZYBA2023070022\");\n\t\t\t// this.init();\n\t\t\tif (this.isScan) {\n\t\t\t\tthis.isNewCode = true\n\t\t\t\tthis.isScan = false\n\t\t\t\tthis.set_archiveId({})\n\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '请扫描二维码进入！',\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\tthis.isScan = false\n\n\t\t\t\t\t\tthis.searchCode()\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t}\n\t\t} else if (p.scene == '1065') {\n\t\t\tthis.isNewCode = true\n\t\t\tthis.set_archiveId({})\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '请扫描二维码进入！',\n\t\t\t\tshowCancel: false,\n\t\t\t\tsuccess: () => {\n\t\t\t\t\tthis.searchCode()\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\t},\n\n\tonLoad(p) {\n\t\tconst token = uni.getStorageSync('token')\n\t\tif (!token) {\n\t\t\tuni.reLaunch({\n\t\t\t\turl: 'pages/login/login',\n\t\t\t})\n\t\t} else {\n\t\t}\n\t},\n}\n</script>\n<style lang=\"scss\">\n.p-home {\n\tmin-height: 100vh;\n\tbackground-color: rgb(237, 240, 246);\n\tfont-size: 24rpx;\n\tpadding-bottom: 20rpx;\n\n\t.block {\n\t\tposition: absolute;\n\t\tright: 20rpx;\n\t\ttop: 0;\n\t\tfont-weight: normal;\n\t\tdisplay: flex;\n\t}\n\n\t.btns {\n\t\tmargin: 0 auto 20rpx;\n\t\twidth: 560rpx;\n\n\t\tdisplay: flex;\n\n\t\t.btn {\n\t\t\tflex: 1;\n\t\t\ttext-align: center;\n\t\t\theight: 50rpx;\n\t\t\tline-height: 50rpx;\n\t\t\tbackground-color: #f2f2f2;\n\t\t\tcolor: #000;\n\t\t\tmargin-right: 4rpx;\n\t\t}\n\n\t\t.btned {\n\t\t\tbackground-color: #0db0f4;\n\t\t\tcolor: #fff;\n\t\t}\n\n\t\t.btn:first-child {\n\t\t\tborder-radius: 25rpx 0 0 25rpx;\n\t\t}\n\n\t\t.btn:last-child {\n\t\t\tborder-radius: 0 25rpx 25rpx 0;\n\t\t}\n\t}\n\n\t&__header {\n\t\tbackground: linear-gradient(\n\t\t\trgba(178, 224, 245, 1),\n\t\t\trgba(2, 165, 238, 1)\n\t\t);\n\t\ttext-align: center;\n\t\tpadding: 80rpx 0 70rpx;\n\n\t\t.img {\n\t\t\twidth: 60rpx;\n\t\t\theight: 40rpx;\n\t\t}\n\n\t\t.name {\n\t\t\tmargin-top: 6rpx;\n\t\t\ttext-align: center;\n\t\t\tfont-size: 36rpx;\n\t\t\tcolor: #fff;\n\t\t\tfont-weight: bold;\n\t\t}\n\n\t\t.info {\n\t\t\tcolor: '#333';\n\t\t\tpadding-right: 10px;\n\t\t\ttext-align: right;\n\t\t}\n\t}\n\n\t&__info {\n\t\tmargin-top: 20rpx;\n\n\t\t.desc {\n\t\t\ttext-align: center;\n\t\t}\n\t}\n\n\t.items {\n\t\tdisplay: flex;\n\t\tpadding: 0rpx 20rpx 20rpx 40rpx;\n\n\t\t.item {\n\t\t\tmargin-right: 20rpx;\n\t\t\tflex: 1;\n\t\t\tbackground-color: rgb(234, 243, 254);\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tpadding: 40rpx 0 20rpx;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tborder-radius: 4rpx;\n\n\t\t\t.img {\n\t\t\t\twidth: 100rpx;\n\t\t\t\theight: 100rpx;\n\t\t\t}\n\n\t\t\t.name {\n\t\t\t\tmargin-top: 20rpx;\n\t\t\t}\n\t\t}\n\t}\n\n\t.charts {\n\t\tpadding: 0 20rpx;\n\t\tdisplay: flex;\n\n\t\t.select {\n\t\t\t.name {\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tborder-bottom: 4rpx solid #ccc;\n\t\t\t\tmargin-bottom: 20rpx;\n\t\t\t\tline-height: 40rpx;\n\t\t\t\ttext-align: center;\n\t\t\t\tcolor: #ccc;\n\t\t\t}\n\t\t}\n\n\t\t.chart {\n\t\t\tposition: relative;\n\n\t\t\t.content {\n\t\t\t\t// padding-top: 32rpx;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\n\t\t\t.value {\n\t\t\t\tfont-size: 52rpx;\n\t\t\t\tfont-weight: bold;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\n\t\t\t.name {\n\t\t\t\tfont-size: 24rpx;\n\t\t\t}\n\t\t}\n\t}\n\n\t.table {\n\t\tbackground-color: #fff;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tborder-top: 1px solid #f2f2f2;\n\t\tborder-left: 1px solid #f2f2f2;\n\t\tmargin: 0 20rpx;\n\t\t// font-size: 28rpx;\n\n\t\t.th {\n\t\t\tbackground-color: rgba(234, 243, 254, 1);\n\t\t}\n\n\t\t.tr {\n\t\t\t.name {\n\t\t\t\tbackground-color: rgba(242, 242, 242, 1);\n\t\t\t}\n\t\t}\n\n\t\t.tr,\n\t\t.th {\n\t\t\tdisplay: flex;\n\t\t\tborder-bottom: 1rpx solid rgb(232, 232, 232);\n\n\t\t\t.td {\n\t\t\t\t// padding-left: 8rpx;\n\t\t\t\tborder-right: 1rpx solid rgb(232, 232, 232);\n\t\t\t\tline-height: 48rpx;\n\t\t\t\tposition: relative;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\n\t\t\t.name {\n\t\t\t\twidth: 26%;\n\t\t\t}\n\n\t\t\t.value {\n\t\t\t\tflex: 1;\n\t\t\t}\n\n\t\t\t.line {\n\t\t\t\ttext-overflow: -o-ellipsis-lastline;\n\t\t\t\toverflow: hidden; //溢出内容隐藏\n\t\t\t\ttext-overflow: ellipsis; //文本溢出部分用省略号表示\n\t\t\t\tdisplay: -webkit-box; //特别显示模式\n\t\t\t\t-webkit-line-clamp: 2; //行数\n\t\t\t\tline-clamp: 2;\n\t\t\t\t-webkit-box-orient: vertical; //盒子中内容竖直排列\n\t\t\t}\n\t\t}\n\t}\n\n\t.table2 {\n\t\tmargin: 0;\n\t}\n}\n\n.c-info2 {\n\twidth: 100%;\n\tposition: relative;\n\tz-index: 10;\n\n\t&__table {\n\t\tbackground-color: #fff;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tborder-top: 1px solid #f2f2f2;\n\t\tborder-left: 1px solid #f2f2f2;\n\t\tmargin: 20rpx 0 0;\n\t\t// font-size: 28rpx;\n\n\t\t.th {\n\t\t\tbackground-color: rgb(232, 232, 232);\n\t\t}\n\n\t\t.tr {\n\t\t\t.name {\n\t\t\t\tbackground-color: rgba(242, 242, 242, 1);\n\t\t\t}\n\t\t}\n\n\t\t.tr,\n\t\t.th {\n\t\t\tdisplay: flex;\n\t\t\tborder-bottom: 1rpx solid rgb(232, 232, 232);\n\n\t\t\t.td {\n\t\t\t\tborder-right: 1rpx solid rgb(232, 232, 232);\n\t\t\t\tline-height: 48rpx;\n\t\t\t\tposition: relative;\n\t\t\t\ttext-align: center;\n\t\t\t\tpadding: 10rpx 8rpx;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t}\n\n\t\t\t.value {\n\t\t\t\ttext-align: left;\n\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t}\n\t}\n\n\t&__footer {\n\t\tmargin: 40rpx 20rpx 0;\n\t\tdisplay: flex;\n\t\tjustify-content: space-evenly;\n\n\t\t.btn {\n\t\t\theight: 70rpx;\n\t\t\tborder-radius: 8rpx;\n\t\t\twidth: 200rpx;\n\t\t\tbackground-color: #f2f2f2;\n\t\t\ttext-align: center;\n\t\t\tline-height: 70rpx;\n\t\t}\n\n\t\t.btn2 {\n\t\t\tbackground-color: #169bd5;\n\t\t\tcolor: #fff;\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1733970382046\n      var cssReload = require(\"F:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}