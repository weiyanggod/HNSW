<block wx:if="{{archive&&archive.code||!isNewCode}}"><view class="p-home"><view class="p-home__header"><image class="img" src="../../static/img/logo.png"></image><view class="name">安全管理一件事</view><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="info" bindtap="__e">{{''+me.name+''}}</view></view><box class="p-home__info" style="margin-top:20rpx;" vue-id="1da55560-1" title="风险源信息" bind:__l="__l" vue-slots="{{['default']}}"><view class="table"><block wx:for="{{info[archive.category1]}}" wx:for-item="item" wx:for-index="index" wx:key="name"><view class="{{[index==0?'th':'tr']}}"><view class="td name">{{item.name||'-'}}</view><view class="td value">{{''+(archive[item.value]||'-')+''}}</view><block wx:if="{{item.name2}}"><view class="td name">{{''+(item.name2||'-')+''}}</view></block><block wx:if="{{item.name2}}"><view class="td value">{{''+(archive[item.value2]||'-')+''}}<block wx:if="{{item.value3}}"><label style="{{'color:'+(archive[item.value3]?'#3ace3a':'#ccc')+';'+('font-size:'+('32rpx')+';')}}" class="_span">{{''+(archive[item.value3]?'√':'○')+''}}</label></block></view></block></view></block></view></box><box class="p-home__info" style="margin-top:20rpx;" vue-id="1da55560-2" title="安全检查" bind:__l="__l" vue-slots="{{['default','title2']}}"><view class="block" slot="title2" data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" bindtap="__e">{{''+selectBlock.name+''}}<u-icon vue-id="{{('1da55560-3')+','+('1da55560-2')}}" name="arrow-down" bind:__l="__l"></u-icon></view><block wx:if="{{hasInBlock}}"><safe vue-id="{{('1da55560-4')+','+('1da55560-2')}}" block="{{selectBlock.code}}" data-event-opts="{{[['^onClose',[['e2']]],['^onAdd',[['e3']]]]}}" bind:onClose="__e" bind:onAdd="__e" bind:__l="__l"></safe></block><block wx:else><view class="desc">请前往该工程区域!</view></block></box><block wx:if="{{archive.category1=='工程'}}"><box class="p-home__info" style="margin-top:20rpx;" vue-id="1da55560-5" title="工程项目" bind:__l="__l" vue-slots="{{['default']}}"><view class="items"><block wx:for="{{projects}}" wx:for-item="item" wx:for-index="__i0__" wx:key="name"><view data-event-opts="{{[['tap',[['go',['$0'],[[['projects','name',item.name]]]]]]]}}" class="item" bindtap="__e"><image class="img" src="{{item.icon}}"></image><view class="name">{{''+item.name+''}}</view></view></block></view></box></block><block wx:if="{{archive.category1=='特种作业'}}"><box class="p-home__info" style="margin-top:20rpx;" vue-id="1da55560-6" title="有限空间" bind:__l="__l" vue-slots="{{['default','title2']}}"><view class="block" slot="title2" data-event-opts="{{[['tap',[['e4',['$event']]]]]}}" bindtap="__e">{{''+selectBlock.name+''}}<u-icon vue-id="{{('1da55560-7')+','+('1da55560-6')}}" name="arrow-down" bind:__l="__l"></u-icon></view><block wx:if="{{hasInBlock}}"><view class="items"><block wx:for="{{actions}}" wx:for-item="item" wx:for-index="__i1__" wx:key="name"><view data-event-opts="{{[['tap',[['go',['$0'],[[['actions','name',item.name]]]]]]]}}" class="item" bindtap="__e"><image class="img" src="{{item.icon}}"></image><view class="name">{{''+item.name+''}}</view></view></block></view></block><block wx:else><view class="desc">请前往该工程区域!</view></block></box></block><box class="p-home__info" style="margin-top:20rpx;" vue-id="1da55560-8" title="统计图表" bind:__l="__l" vue-slots="{{['default']}}"><view class="charts"><block wx:if="{{archive.category1!='特种作业'}}"><view class="select"><view class="btns" style="width:160rpx;"><block wx:for="{{charts.types}}" wx:for-item="btn" wx:for-index="__i2__" wx:key="value"><view data-event-opts="{{[['tap',[['selectChartType',['$0'],[[['charts.types','value',btn.value]]]]]]]}}" class="{{['btn',(btn.value==charts.type)?'btned':'']}}" bindtap="__e">{{''+btn.name+''}}</view></block></view><block wx:for="{{[1,2,3]}}" wx:for-item="item" wx:for-index="__i3__" wx:key="*this"><view data-event-opts="{{[['tap',[['e5',['$event']]]]]}}" data-event-params="{{({item})}}" class="name" style="{{'border-color:'+(charts.index==item?charts[item].color:'#ccc')+';'+('color:'+(charts.index==item?'#000':'#ccc')+';')}}" bindtap="__e">{{''+charts[item].name+''}}</view></block></view></block><block wx:if="{{!charts.loading&&!charts.loading2&&archive.category1!='特种作业'}}"><u-circle-progress data-custom-hidden="{{!(!showWorder&&!showBlock&&!showImprove&&!showDetail&&!showInfo&&!show&&!showInspectionsDetail&&!showStartProject&&!showProject_stop)}}" class="chart" vue-id="{{('1da55560-9')+','+('1da55560-8')}}" active-color="{{charts[charts.index].color}}" percent="{{charts[charts.index][charts.type]}}" width="260" duration="{{0}}" border-width="{{20}}" bind:__l="__l" vue-slots="{{['default']}}"><view class="content"><text class="name">{{''+(charts.type=='month'?'月':'年')+'检查率'}}</text><view class="value" style="{{'color:'+(charts[charts.index].color)+';'}}">{{''+charts[charts.index][charts.type]+'%'}}</view></view></u-circle-progress></block><block wx:if="{{!charts.loading2}}"><u-circle-progress data-custom-hidden="{{!(!showWorder&&!showBlock&&!showImprove&&!showDetail&&!showInfo&&!show&&!showInspectionsDetail&&!showStartProject&&!showProject_stop)}}" class="chart" vue-id="{{('1da55560-10')+','+('1da55560-8')}}" active-color="{{charts[4].color}}" percent="{{charts[4].value}}" width="260" duration="{{0}}" border-width="{{20}}" bind:__l="__l" vue-slots="{{['default']}}"><view class="content"><text class="name">隐患整改完成率</text><view class="value" style="{{'color:'+(charts[4].color)+';'}}">{{''+charts[4].value+'%'}}</view></view></u-circle-progress></block></view></box><box class="p-home__info" style="margin-top:20rpx;" vue-id="1da55560-11" title="隐患及检查记录台账" bind:__l="__l" vue-slots="{{['default']}}"><view class="btns"><block wx:for="{{list.types}}" wx:for-item="btn" wx:for-index="__i4__" wx:key="value"><view data-event-opts="{{[['tap',[['selectListType',['$0'],[[['list.types','value',btn.value]]]]]]]}}" class="{{['btn',(btn.value==list.type)?'btned':'']}}" bindtap="__e">{{''+btn.name+''}}</view></block></view><block wx:if="{{list.type=='2'}}"><view class="table table2"><view class="th"><view class="td" style="width:10%;">序号</view><view class="td" style="width:20%;">检查时间</view><view class="td" style="width:15%;">检查人</view><view class="td" style="width:25%;">检查单位</view><view class="td" style="width:15%;">隐患情况</view><view class="td" style="width:15%;">整改情况</view></view><block wx:for="{{$root.l0}}" wx:for-item="item2" wx:for-index="index" wx:key="index"><view class="tr"><view class="td" style="width:10%;">{{index+1}}</view><view data-event-opts="{{[['tap',[['onSelectInspections',['$0'],[[['list.inspections','',index]]]]]]]}}" class="td" style="width:20%;color:#3c9cff;" bindtap="__e">{{''+item2.g0[0]+''}}</view><view class="td" style="width:15%;">{{item2.$orig.user}}</view><view class="td" style="width:25%;">{{''+item2.$orig.company+''}}</view><view class="td" style="width:15%;">{{''+item2.$orig.improve_situation+''}}</view><view data-event-opts="{{[['tap',[['onSelectInspection',['$0'],[[['list.inspections','',index]]]]]]]}}" class="td" style="width:15%;color:#3c9cff;" bindtap="__e">{{''+item2.$orig.improve_state+''}}</view></view></block></view></block><block wx:else><view class="table table2"><view class="th"><view class="td" style="width:20%;">隐患名称</view><view class="td" style="width:20%;">发现时间</view><view class="td" style="width:25%;">整改措施</view><view class="td" style="width:20%;">整改时间</view><view class="td" style="width:15%;">隐患状态</view></view><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="__i5__" wx:key="code"><view data-event-opts="{{[['tap',[['e6',['$event']]]]]}}" data-event-params="{{({item:item.$orig})}}" class="tr" bindtap="__e"><view class="td line" style="width:20%;">{{''+(item.$orig.name||'-')+''}}</view><view class="td" style="width:20%;color:#3c9cff;">{{''+(item.$orig.rtime?item.g1[0]:'-')+''}}</view><view class="td line" style="width:25%;">{{''+(item.$orig.method||'-')+''}}</view><view class="td" style="width:20%;">{{''+(item.$orig.time?item.g2[0]:'-')+''}}</view><view class="td" style="width:15%;">{{item.$orig.state}}</view></view></block></view></block></box><box class="p-home__info" style="margin-top:20rpx;" vue-id="1da55560-12" title="停工记录" bind:__l="__l" vue-slots="{{['default']}}"><view class="table table2"><view class="th"><view class="td" style="width:10%;">序号</view><view class="td" style="width:20%;">申请人</view><view class="td" style="width:20%;">区块名称</view><view class="td" style="width:25%;">停工开始日期</view><view class="td" style="width:25%;">停工结束日期</view></view><block wx:for="{{stopList.data}}" wx:for-item="item2" wx:for-index="index" wx:key="index"><view class="tr"><view class="td" style="width:10%;">{{index+1}}</view><view class="td" style="width:20%;">{{''+item2.applicants+''}}</view><view class="td" style="width:20%;">{{''+item2.blockName+''}}</view><view class="td" style="width:25%;color:#3c9cff;">{{''+item2.startDate+''}}</view><view class="td" style="width:25%;color:#3c9cff;">{{''+item2.endDate+''}}</view></view></block></view></box><block wx:if="{{showWorder}}"><worker vue-id="1da55560-13" block="{{selectBlock.code}}" data-event-opts="{{[['^onClose',[['e7']]]]}}" bind:onClose="__e" bind:__l="__l"></worker></block><block wx:if="{{showProject_stop}}"><project-stop bind:onClose="__e" vue-id="1da55560-14" data-event-opts="{{[['^onClose',[['e8']]]]}}" bind:__l="__l"></project-stop></block><block wx:if="{{showInfo}}"><info vue-id="1da55560-15" positions="{{positions}}" positionAccuracy="{{positionAccuracy}}" data-event-opts="{{[['^onClose',[['e9']]]]}}" bind:onClose="__e" bind:__l="__l"></info></block><block wx:if="{{showDetail}}"><improve-detail vue-id="1da55560-16" item="{{selectImprove}}" items="{{improvesDto}}" data-event-opts="{{[['^onClose',[['e10']]]]}}" bind:onClose="__e" bind:__l="__l"></improve-detail></block><block wx:if="{{showInspectionsDetail}}"><inspections-detail vue-id="1da55560-17" items="{{checkDetailDto}}" data-event-opts="{{[['^onClose',[['e11']]]]}}" bind:onClose="__e" bind:__l="__l"></inspections-detail></block><block wx:if="{{!show}}"><u-picker vue-id="1da55560-18" show="{{showBlock}}" columns="{{[archive.block]}}" keyName="name" data-event-opts="{{[['^confirm',[['onSelectConfirm']]],['^cancel',[['onSelectCancel']]]]}}" bind:confirm="__e" bind:cancel="__e" bind:__l="__l"></u-picker></block><u-modal vue-id="1da55560-19" show="{{show}}" title=" " content=" " showConfirmButton="{{false}}" data-event-opts="{{[['^cancel',[['onCancel']]]]}}" bind:cancel="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="c-info2"><view class="c-info2__table"><view class="th"><view class="td" style="width:100%;">工程完工</view></view><view class="tr"><view class="td" style="width:30%;">区块</view><view data-event-opts="{{[['tap',[['e12',['$event']]]]]}}" class="td value" style="width:70%;" bindtap="__e">{{''+selectBlock.name+''}}<u-icon vue-id="{{('1da55560-20')+','+('1da55560-19')}}" name="arrow-down" bind:__l="__l"></u-icon></view></view></view><view class="c-info2__footer" slot="confirmButton"><view data-event-opts="{{[['tap',[['e13',['$event']]]]]}}" class="btn" bindtap="__e">取消</view><view data-event-opts="{{[['tap',[['onSubmitProjectEnd',['$event']]]]]}}" class="btn btn2" bindtap="__e">确定</view></view></view><block wx:if="{{show}}"><u-picker vue-id="{{('1da55560-21')+','+('1da55560-19')}}" show="{{showBlock}}" columns="{{[archive.block]}}" keyName="name" data-event-opts="{{[['^confirm',[['onSelectConfirm']]],['^cancel',[['onSelectCancel']]]]}}" bind:confirm="__e" bind:cancel="__e" bind:__l="__l"></u-picker></block></u-modal><u-modal vue-id="1da55560-22" show="{{showStartProject}}" title=" " content=" " showConfirmButton="{{false}}" data-event-opts="{{[['^cancel',[['onCancel']]]]}}" bind:cancel="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="c-info2"><view class="c-info2__table"><view class="th"><view class="td" style="width:100%;">当日签到</view></view><view class="tr"><view class="td" style="width:30%;">备注</view><view class="td value" style="width:70%;"><textarea style="text-align:left;width:100%;height:120rpx;" type="text" placeholder="请输入" data-event-opts="{{[['input',[['__set_model',['$0','node','$event',[]],['startProject']]]]]}}" value="{{startProject.node}}" bindinput="__e"></textarea></view></view></view><view class="c-info2__footer" slot="confirmButton"><view data-event-opts="{{[['tap',[['e14',['$event']]]]]}}" class="btn" bindtap="__e">取消</view><view data-event-opts="{{[['tap',[['onSubmitProjectStart',['$event']]]]]}}" class="btn btn2" bindtap="__e">确定</view></view></view></u-modal></view></block>